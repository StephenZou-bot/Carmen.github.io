function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _slicedToArray(e,t){return _arrayWithHoles(e)||_iterableToArrayLimit(e,t)||_unsupportedIterableToArray(e,t)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);let n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(e,t):void 0}}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function _iterableToArrayLimit(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){const o=[];let i,a=!0,l=!1;try{for(var n,r=e[Symbol.iterator]();!(a=(n=r.next()).done)&&(o.push(n.value),!t||o.length!==t);a=!0);}catch(e){l=!0,i=e}finally{try{a||null==r.return||r.return()}finally{if(l)throw i}}return o}}function _arrayWithHoles(e){if(Array.isArray(e))return e}!function(){function e(e){return["elInY+elHeight","elCenterY-".concat(e=arguments.length>0&&void 0!==e?e:30),"elCenterY","elCenterY+".concat(e),"elOutY-elHeight"]}let t,n,r,o,i,a;const l={fadeInOut:function(t,n){return n=arguments.length>1&&void 0!==n?n:0,{opacity:[e(arguments.length>0&&void 0!==t?t:30),[n,1,1,1,n]]}},fadeIn:function(e,t){return{opacity:[["elInY+elHeight",arguments.length>0&&void 0!==e?e:"elCenterY"],[arguments.length>1&&void 0!==t?t:0,1]]}},fadeOut:function(e,t){return{opacity:[[arguments.length>0&&void 0!==e?e:"elCenterY","elOutY-elHeight"],[1,arguments.length>1&&void 0!==t?t:0]]}},blurInOut:function(t,n){return n=arguments.length>1&&void 0!==n?n:20,{blur:[e(arguments.length>0&&void 0!==t?t:100),[n,0,0,0,n]]}},blurIn:function(e,t){return{blur:[["elInY+elHeight",arguments.length>0&&void 0!==e?e:"elCenterY"],[arguments.length>1&&void 0!==t?t:20,0]]}},blurOut:function(e,t){return{opacity:[[arguments.length>0&&void 0!==e?e:"elCenterY","elOutY-elHeight"],[0,arguments.length>1&&void 0!==t?t:20]]}},scaleInOut:function(t,n){return n=arguments.length>1&&void 0!==n?n:.6,{scale:[e(arguments.length>0&&void 0!==t?t:100),[n,1,1,1,n]]}},scaleIn:function(e,t){return{scale:[["elInY+elHeight",arguments.length>0&&void 0!==e?e:"elCenterY"],[arguments.length>1&&void 0!==t?t:.6,1]]}},scaleOut:function(e,t){return{scale:[[arguments.length>0&&void 0!==e?e:"elCenterY","elOutY-elHeight"],[1,arguments.length>1&&void 0!==t?t:.6]]}},slideX:function(e,t){return{translateX:[["elInY",arguments.length>0&&void 0!==e?e:0],[0,arguments.length>1&&void 0!==t?t:500]]}},slideY:function(e,t){return{translateY:[["elInY",arguments.length>0&&void 0!==e?e:0],[0,arguments.length>1&&void 0!==t?t:500]]}},spin:function(e,t){return{rotate:[[0,e=arguments.length>0&&void 0!==e?e:1e3],[0,arguments.length>1&&void 0!==t?t:360],{modValue:e}]}},flipX:function(e,t){return{rotateX:[[0,e=arguments.length>0&&void 0!==e?e:1e3],[0,arguments.length>1&&void 0!==t?t:360],{modValue:e}]}},flipY:function(e,t){return{rotateY:[[0,e=arguments.length>0&&void 0!==e?e:1e3],[0,arguments.length>1&&void 0!==t?t:360],{modValue:e}]}},jiggle:function(e,t){return{skewX:[[0,+(e=arguments.length>0&&void 0!==e?e:50),2*e,3*e,4*e],[0,t=arguments.length>1&&void 0!==t?t:40,0,-t,0],{modValue:4*e}]}},seesaw:function(e,t){return{skewY:[[0,+(e=arguments.length>0&&void 0!==e?e:50),2*e,3*e,4*e],[0,t=arguments.length>1&&void 0!==t?t:40,0,-t,0],{modValue:4*e}]}},zigzag:function(e,t){return{translateX:[[0,+(e=arguments.length>0&&void 0!==e?e:100),2*e,3*e,4*e],[0,t=arguments.length>1&&void 0!==t?t:100,0,-t,0],{modValue:4*e}]}},hueRotate:function(e,t){return{"hue-rotate":[[0,e=arguments.length>0&&void 0!==e?e:600],[0,arguments.length>1&&void 0!==t?t:360],{modValue:e}]}}},s=(t=["perspective","scaleX","scaleY","scale","skewX","skewY","skew","rotateX","rotateY","rotate"],n=["blur","hue-rotate","brightness"],r=["translateX","translateY","translateZ"],o=["perspective","border-radius","blur","translateX","translateY","translateZ"],i=["hue-rotate","rotate","rotateX","rotateY","skew","skewX","skewY"],a={easeInQuad:function(e){return e*e},easeOutQuad:function(e){return e*(2-e)},easeInOutQuad:function(e){return e<.5?2*e*e:(4-2*e)*e-1},easeInCubic:function(e){return e*e*e},easeOutCubic:function(e){return--e*e*e+1},easeInOutCubic:function(e){return e<.5?4*e*e*e:(e-1)*(2*e-2)*(2*e-2)+1},easeInQuart:function(e){return e*e*e*e},easeOutQuart:function(e){return 1- --e*e*e*e},easeInOutQuart:function(e){return e<.5?8*e*e*e*e:1-8*--e*e*e*e},easeInQuint:function(e){return e*e*e*e*e},easeOutQuint:function(e){return 1+--e*e*e*e*e},easeInOutQuint:function(e){return e<.5?16*e*e*e*e*e:1+16*--e*e*e*e*e},easeOutBounce:function(e){const t=7.5625,n=2.75;return e<1/n?t*e*e:e<2/n?t*(e-=1.5/n)*e+.75:e<2.5/n?t*(e-=2.25/n)*e+.9375:t*(e-=2.625/n)*e+.984375},easeInBounce:function(e){return 1-a.easeOutBounce(1-e)},easeOutBack:function(e){return 1+2.70158*Math.pow(e-1,3)+1.70158*Math.pow(e-1,2)},easeInBack:function(e){return 2.70158*e*e*e-1.70158*e*e}},new function e(){const t=this;_classCallCheck(this,e),_defineProperty(this,"drivers",[]),_defineProperty(this,"elements",[]),_defineProperty(this,"frame",0),_defineProperty(this,"debug",!1),_defineProperty(this,"windowWidth",0),_defineProperty(this,"windowHeight",0),_defineProperty(this,"presets",l),_defineProperty(this,"debugData",{frameLengths:[]}),_defineProperty(this,"init",(()=>{t.findAndAddElements(),window.requestAnimationFrame(t.onAnimationFrame),t.windowWidth=document.body.clientWidth,t.windowHeight=document.body.clientHeight,window.onresize=t.onWindowResize})),_defineProperty(this,"onWindowResize",(()=>{document.body.clientWidth===t.windowWidth&&document.body.clientHeight===t.windowHeight||(t.windowWidth=document.body.clientWidth,t.windowHeight=document.body.clientHeight,t.elements.forEach((e=>e.calculateTransforms())))})),_defineProperty(this,"onAnimationFrame",(e=>{let n;t.debug&&(t.debugData.frameStart=Date.now());const r={};t.drivers.forEach((e=>{r[e.name]=e.getValue(t.frame)})),t.elements.forEach((e=>{e.update(r,t.frame)})),t.debug&&t.debugData.frameLengths.push(Date.now()-t.debugData.frameStart),t.frame%60==0&&t.debug&&(n=Math.ceil(t.debugData.frameLengths.reduce(((e,t)=>e+t),0)/60),console.log("Average frame calculation time: ".concat(n,"ms")),t.debugData.frameLengths=[]),t.frame++,window.requestAnimationFrame(t.onAnimationFrame)})),_defineProperty(this,"addDriver",(function(e,n){const r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};t.drivers.push(new u(e,n,r))})),_defineProperty(this,"removeDriver",(e=>{t.drivers=t.drivers.filter((t=>t.name!==e))})),_defineProperty(this,"findAndAddElements",(()=>{t.elements=[],document.querySelectorAll(".lax").forEach((e=>{const n=[];e.classList.forEach((e=>{e.includes("lax_preset")&&(e=e.replace("lax_preset_",""),n.push(e))}));const r=_defineProperty({},"scrollY",{presets:n});t.elements.push(new h(".lax",t,e,r,0,{}))}))})),_defineProperty(this,"addElements",((e,n,r)=>{document.querySelectorAll(e).forEach(((o,i)=>{t.elements.push(new h(e,t,o,n,i,r))}))})),_defineProperty(this,"removeElements",(e=>{t.elements=t.elements.filter((t=>t.selector!==e))})),_defineProperty(this,"addElement",((e,n,r)=>{t.elements.push(new h("",t,e,n,0,r))})),_defineProperty(this,"removeElement",(e=>{t.elements=t.elements.filter((t=>t.domElement!==e))}))});function c(e,t){if(Array.isArray(e))return e;for(var n=Object.keys(e).map((e=>parseInt(e))).sort(((e,t)=>t<e?1:-1)),r=n[n.length-1],o=0;o<n.length;o++){const e=n[o];if(t<e){r=e;break}}return e[r]}function d(e,t,n){const r=t.width,o=t.height;var i=t.x,a=t.y;if("number"==typeof e)return e;let l;const s=document.body.scrollHeight,c=document.body.scrollWidth,d=window.innerWidth,u=window.innerHeight;t=(h=_slicedToArray((l=void 0!==window.pageXOffset,h="CSS1Compat"===(document.compatMode||""),t=l?window.pageXOffset:(h?document.documentElement:document.body).scrollLeft,[l?window.pageYOffset:(h?document.documentElement:document.body).scrollTop,t]),2))[0];var h=(i=i+h[1])+r;t=(a=a+t)+o;return Function("return ".concat(e.replace(/screenWidth/g,d).replace(/screenHeight/g,u).replace(/pageHeight/g,s).replace(/pageWidth/g,c).replace(/elWidth/g,r).replace(/elHeight/g,o).replace(/elInY/g,a-u).replace(/elOutY/g,t).replace(/elCenterY/g,a+o/2-u/2).replace(/elInX/g,i-d).replace(/elOutX/g,h).replace(/elCenterX/g,i+r/2-d/2).replace(/index/g,n)))()}function u(e,t){const n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};_classCallCheck(this,u),_defineProperty(this,"getValueFn",void 0),_defineProperty(this,"name",""),_defineProperty(this,"lastValue",0),_defineProperty(this,"frameStep",1),_defineProperty(this,"m1",0),_defineProperty(this,"m2",0),_defineProperty(this,"inertia",0),_defineProperty(this,"inertiaEnabled",!1),_defineProperty(this,"getValue",(e=>{let t=n.lastValue;return e%n.frameStep==0&&(t=n.getValueFn(e)),n.inertiaEnabled&&(e=t-n.lastValue,n.m1=.8*n.m1+e*(1-.8),n.m2=.8*n.m2+n.m1*(1-.8),n.inertia=Math.round(5e3*n.m2)/15e3),n.lastValue=t,[n.lastValue,n.inertia]})),this.name=e,this.getValueFn=t,Object.keys(r).forEach((e=>{n[e]=r[e]})),this.lastValue=this.getValueFn(0)}function h(e,l,s,u){const f=this;let m=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;var p=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};_classCallCheck(this,h),_defineProperty(this,"domElement",void 0),_defineProperty(this,"transformsData",void 0),_defineProperty(this,"styles",{}),_defineProperty(this,"selector",""),_defineProperty(this,"groupIndex",0),_defineProperty(this,"laxInstance",void 0),_defineProperty(this,"onUpdate",void 0),_defineProperty(this,"update",((e,t)=>{let n;const r=f.transforms,l={};for(n in r){const g=r[n];var s;e[n]||console.error("No lax driver with name: ",n);const y=_slicedToArray(e[n],2),v=y[0],w=y[1];for(s in g){var c;const e=(u=_slicedToArray(g[s],3))[0],n=u[1];const r=(p=void 0===(h=u[2])?{}:h).modValue;const y=void 0===(m=p.frameStep)?1:m;var d=p.easing,u=p.inertia,h=p.inertiaMode,m=p.cssFn,p=void 0===(p=p.cssUnit)?"":p;d=a[d];t%y==0&&(d=function(e,t,n,r){let o,i=0;if(e.forEach((e=>{e<n&&i++})),i<=0)return t[0];if(i>=e.length)return t[e.length-1];var a=(a=e[o=i-1],e=e[i],(n-a)/(e-a));return r&&(a=r(a)),o=t[o],o*(1-a)+(t=t[i])*a}(e,n,r?v%r:v,d),u&&(c=w*u,"absolute"===h&&(c=Math.abs(c)),d+=c),c="px"==(p||o.includes(s)?"px":i.includes(s)?"deg":"")?0:3,c=d.toFixed(c),l[s]=m?m(c,f.domElement):c+p)}}f.applyStyles(l),f.onUpdate&&f.onUpdate(e,f.domElement)})),_defineProperty(this,"calculateTransforms",(()=>{let e;f.transforms={};const t=f.laxInstance.windowWidth;for(e in f.transformsData)!function(e){const n=f.transformsData[e],r={},o=n.presets;(void 0===o?[]:o).forEach((e=>{let t;const r=(i=_slicedToArray(e.split(":"),3))[0],o=i[1];var i;e=i[2];(i=window.lax.presets[r])?(t=i(o,e),Object.keys(t).forEach((e=>{n[e]=t[e]}))):console.error("Lax preset cannot be found with name: ",r)})),delete n.presets;for(const e in n)!function(e){var o=void 0===(i=(a=_slicedToArray(n[e],3))[0])?[-1e9,1e9]:i,i=void 0===(i=a[1])?[-1e9,1e9]:i,a=void 0===(a=a[2])?{}:a;const l=f.domElement.getBoundingClientRect();o=c(o,t).map((e=>d(e,l,f.groupIndex))),i=c(i,t).map((e=>d(e,l,f.groupIndex)));r[e]=[o,i,a]}(e);f.transforms[e]=r}(e)})),_defineProperty(this,"applyStyles",(e=>{let a,l,s;const c=(a=e,l={transform:"",filter:""},s={translateX:1e-5,translateY:1e-5,translateZ:1e-5},Object.keys(a).forEach((e=>{const c=a[e],d=o.includes(e)?"px":i.includes(e)?"deg":"";r.includes(e)?s[e]=c:t.includes(e)?l.transform+="".concat(e,"(").concat(c).concat(d,") "):n.includes(e)?l.filter+="".concat(e,"(").concat(c).concat(d,") "):l[e]="".concat(c).concat(d," ")})),l.transform="translate3d(".concat(s.translateX,"px, ").concat(s.translateY,"px, ").concat(s.translateZ,"px) ").concat(l.transform),l);Object.keys(c).forEach((e=>{f.domElement.style.setProperty(e,c[e])}))})),this.selector=e,this.laxInstance=l,this.domElement=s,this.transformsData=u,this.groupIndex=m;const g=void 0===(m=p.style)?{}:m;p=p.onUpdate;Object.keys(g).forEach((e=>{s.style.setProperty(e,g[e])})),p&&(this.onUpdate=p),this.calculateTransforms()}"undefined"!=typeof module&&void 0!==module.exports?module.exports=s:window.lax=s}();